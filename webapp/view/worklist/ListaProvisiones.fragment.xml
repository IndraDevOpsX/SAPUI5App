<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:flow="sap.suite.ui.commons">
        <Table
            id="idProvisiones"
            width="auto"
            items="{
                path: '/Solicitudes',
                sorter: {
                    path: 'idProvision',
                    descending: true
                }
            }"
            growingThreshold = "10"
            noDataText="{worklistView>/tableNoDataText}"
            busyIndicatorDelay="{worklistView>/tableBusyDelay}"
            busy="{worklistView>/busy}"
            growing="true"
            growingScrollToLoad="true"
            updateFinished=".onUpdateFinished"
            mode="MultiSelect"
            selectionChange="onSeleccionarsolicitud">

            <headerToolbar>
                <OverflowToolbar>
                    <Title
                        id="tableHeader"
                        text="{i18n>worklistTableTitle} ({worklistView>/cantidad})"
                        level="H3"/>
                    <ToolbarSpacer />
                    <Button
                        visible="{device>/system/phone}"
                        icon="sap-icon://excel-attachment"
                        text="{= !${device>/system/phone} ? 'Exportar' : ''}"
                        press="onExportar"
                        type="Reject"/>
                </OverflowToolbar>
            </headerToolbar>

            <columns>
                <Column width="6rem">
                    <Text text="{i18n>codigoProvision}" />
                </Column>
                
                <Column minScreenWidth="Desktop" demandPopin="true">
                    <Text text="{i18n>usuarioRegistro}" />
                </Column>
                
                <!-- <Column minScreenWidth="Desktop" demandPopin="true">
                    <Text text="{i18n>gerenciaJefatura}" />
                </Column> -->

                <Column minScreenWidth="Desktop" demandPopin="true">
                    <Text text="{i18n>periodoCierre}" />
                </Column>
                
                <!-- <Column minScreenWidth="Desktop" demandPopin="true">
                    <Text text="{i18n>fechaRegistro}" />
                </Column> -->

                <Column minScreenWidth="Desktop" demandPopin="true">
                    <Text text="{i18n>fechaEnvio}" />
                </Column>

                <Column minScreenWidth="Desktop" demandPopin="true">
                    <Text text="{i18n>montoSoles}" />
                </Column>

                <Column minScreenWidth="Desktop" demandPopin="true">
                    <Text text="{i18n>montoDolares}" />
                </Column>


                <Column hAlign="Left" minScreenWidth="Desktop" demandPopin="true" >
                    <Label text="Estado" />
                </Column>
                <Column hAlign="Center" width="5rem" >
                    <Label text="Borrar" />
                </Column>
            </columns>

            <items>
                <ColumnListItem
                    type="Navigation"
                    highlight="{
                        path:'idEstadoProvision_idEstadoProvision',
                        formatter:'.formatter.formatEstados'
                    }"
                    press="onPressProvision">
                    <cells>
                        <ObjectIdentifier
                            title="{idProvision}"/>
                        <Text text="{usuarioRegistrador} - {usuarioRegistradorDesc}" />
                        <!-- <Text text="{usuarioRegistrador}" /> -->
                        <!-- <Text text="{gerenciaJefaturaSolicitante_Desc}" /> -->
						<Text text="{
                            path: 'periodoCierre',
                            type: 'sap.ui.model.type.Date',
                            formatOptions: {
                                pattern: 'MM-y', UTC: 'true'
                            }
                        }" />
						<!-- <Text text="{
                            path: 'fechaRegistro',
                            type: 'sap.ui.model.type.Date',
                            formatOptions: {
                                style: 'medium',
					            pattern: 'dd.MM.yyy'
                            }
                        }" /> -->
						<Text text="{
                            path: 'fechaEnvio',
                            type: 'sap.ui.model.type.Date',
                            formatOptions: {
                                style: 'medium',
					            pattern: 'dd.MM.yyy', UTC: 'true'
                            }
                        }" />
                        <ObjectNumber
                            number="{ path: 'montoSoles',
									type: 'sap.ui.model.type.Float',
									formatOptions: {
										style: 'standard',
										decimalSeparator: '.',
										groupingEnabled: true,
										groupingSeparator: ',',
										minFractionDigits: 2,
										maxFractionDigits: 2
									}
								}" 
                            unit="{monedaSoles}"
                            state="Warning" />

                        <ObjectNumber
                            number="{ path: 'montoDolares',
									type: 'sap.ui.model.type.Float',
									formatOptions: {
										style: 'standard',
										decimalSeparator: '.',
										groupingEnabled: true,
										groupingSeparator: ',',
										minFractionDigits: 2,
										maxFractionDigits: 2
									}
								}" 
                            unit="{monedaDolares}"
                            state="Information" />
                        
                        <VBox  alignItems="{= ${device>/system/phone} ? 'Start' : 'Center' }" direction="{= ${device>/system/phone} ? 'Column' : 'Row' }" width="100%" >
                            <ObjectStatus
                                text="{= ${indicadorNoProvision} &amp;&amp; ${idEstadoProvision_idEstadoProvision} !== 0 ? 'No provisionarÃ©' : ${idEstadoProvision/descripcion}}"
                                state="{
                                    path:'idEstadoProvision_idEstadoProvision',
                                    formatter:'.formatter.formatEstados'
                                }"
                                inverted="true" />
                            <Button type="Transparent" icon="sap-icon://show" 
                                    visible="{= ${idEstadoProvision_idEstadoProvision} === 6 }"
                                    press=".onVerMotivo"></Button>
                        </VBox>
                        <Button 
                            icon="sap-icon://delete"
                            press="onBorrarSolicitud" 
                            type="Transparent"
                            visible="{= ${idEstadoProvision_idEstadoProvision} === 2}"/>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
</core:FragmentDefinition>