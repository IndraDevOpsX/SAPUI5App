<mvc:View controllerName="com.indra.gestionprovisiones.controller.Home"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core">
    
    <f:DynamicPage
        id="idPage"
        showFooter="true">
        <f:title>
            <f:DynamicPageTitle
                backgroundDesign="Solid">
                <f:actions>
                    <Button
                        visible="{device>/system/desktop}"
                        icon="sap-icon://write-new"
                        text="Nueva Provisión"
                        type="Negative"
                        press="onIrNuevaProvision"/>
                    
                </f:actions>
                <f:heading>
                    <Title
                        text="{i18n>worklistTitle}"
                        level="H2"
                        wrapping="true"/>
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>

        <f:header>
            <f:DynamicPageHeader
                backgroundDesign="Translucent">
                <core:Fragment fragmentName="com.indra.gestionprovisiones.view.worklist.SearchForm" type="XML" />    
            </f:DynamicPageHeader>
        </f:header>

        <f:content>
            <VBox>
                    <Button
                        visible="{device>/system/phone}"
                        icon="sap-icon://write-new"
                        text="Nueva Provisión"
                        type="Negative"
                        width="100%"
                        press="onIrNuevaProvision"/>
                <core:Fragment fragmentName="com.indra.gestionprovisiones.view.worklist.ListaProvisiones" type="XML" />
            </VBox>
        </f:content>

        <f:footer>
            <OverflowToolbar>
                <Button
                    id="idMessagePopoverButton" 
					icon="{ path: 'worklistView>/icon', formatter: '.formatter.buttonIconFormatterPopover' }"
					type="{ path: 'worklistView>/type', formatter: '.formatter.buttonTypeFormatterPopover' }"
					text= "{path: 'worklistView>/text', formatter: '.formatter.highestSeverityMessagesPopover' }"
                    visible="{= !!${message>/}.length}"
					press="onHandlerMessagePopover"
					ariaHasPopup="Dialog"/>
                <ToolbarSpacer/>
                <Button type="Negative" icon="sap-icon://upload-to-cloud" text="Enviar aprobar" press="onEnviarSolicitud" />
                
            </OverflowToolbar>
        </f:footer>

    </f:DynamicPage>


</mvc:View>
