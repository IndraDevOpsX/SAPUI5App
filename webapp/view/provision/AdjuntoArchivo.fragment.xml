<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:c="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:upload="sap.m.upload"
    
>
    <VBox >
    
    <f:DynamicPage >
        <f:content>

            <Table
                id="tablaArchivo"
                sticky="ColumnHeaders,HeaderToolbar"
                width="auto"
                mode="MultiSelect"
                fixedLayout="false"
                inset="false"
                autoPopinMode="true"
                hiddenInPopin="None"                
                noDataText="No se han subido archivos."
                selectionChange="onSelectionChange"
                items="{path: 'archivos>/items', templateShareable: false}">

                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="Documentos ({= ${archivos>/items}.length})" level="H2" />
                        <ToolbarSpacer />
                        
                        <Button
                            id="idBtnCargar"
                            text="Cargar"
                            icon="sap-icon://upload-to-cloud"
                            press="onCargarArchivoDMS" 
                            visible="{= ${provisionCabModel>/idEstadoProvision_idEstadoProvision} === 2 }" />
                        <Button
                            id="descargarArchivo"
                            text="Descargar"
                            icon="sap-icon://download-from-cloud"
                            enabled="false"
                            press="onDescargarArchivo" />
                        <Button
                            id="eliminarArchivo"
                            text="Eliminar"
                            icon="sap-icon://delete"
                            enabled="false"
                            press="onEliminarArchivo"
                            visible="{= ${provisionCabModel>/idEstadoProvision_idEstadoProvision} === 2 }" />
                    </OverflowToolbar>
                </headerToolbar>

                <columns>
                    <Column>
                        <Text text="Vista Previa" />
                    </Column>
                    <Column id="nombreArchivo" importance="High" demandPopin="true" >
                        <header>
                            <Label text="Nombre del Archivo" />
                        </header>
                    </Column>
                    <Column id="tamanioArchivo" importance="High" demandPopin="true">
                        <header>
                            <Label text="TamaÃ±o del Archivo" />
                        </header>
                    </Column>
                    <Column id="formatoArchivo" importance="High" demandPopin="true">
                        <header>
                            <Label text="Formato del Archivo" />
                        </header>
                    </Column>
                    <Column id="url" importance="High" demandPopin="true">
                        <header>
                            <Label text="URL" />
                        </header>
                    </Column>
                </columns>

                <!-- <items>
                    <ColumnListItem
                        type="Active"
                        press="onPresionaArticulo">
                        <cells>
                            <Image src="{archivos>url}" width="50px" height="50px" />
                            <Text text="{documents>nombreArchivo}" />
                            <Text
                                text="{parts: ['documents>formatoArchivo'], formatter: '.getFileSizeWithUnits'}" />
                        </cells>
                    </ColumnListItem>
                </items> -->
                <items>
                <ColumnListItem>

                    <Image src="{archivos>url}" width="50px" height="50px" />

                    <Link text="{archivos>nombreArchivo}"
                            press="onVerArchivo"
                            style="color: blue; text-decoration: underline;" />
                    <cells>
                        <Text text="{archivos>nombreArchivo}" />
                        <Text text="{archivos>tamanioArchivo}" />
                        <Text text="{archivos>formatoArchivo}" />
                        <Text text="{archivos>url}" />
                    </cells>
                </ColumnListItem>
            </items>

            </Table>
        </f:content>
    </f:DynamicPage>
    </VBox>
</c:FragmentDefinition>
